{"remainingRequest":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\src\\components\\common\\swiper\\Swiper.vue?vue&type=style&index=0&id=bc58910a&scoped=true&lang=css&","dependencies":[{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\src\\components\\common\\swiper\\Swiper.vue","mtime":1637042852321},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\css-loader\\index.js","mtime":1636441675622},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636441705188},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\postcss-loader\\src\\index.js","mtime":1636441711061},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636441690295},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\vue-loader\\lib\\index.js","mtime":1636441705177}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#hy-swiper{\n    overflow: hidden;\n    position: relative;\n}\n\n.swiper{\n    display: flex;\n}\n\n.indicator {\n    display: flex;\n    justify-content: center;\n    position: absolute;\n    width: 100%;\n    bottom: 8px;\n}\n\n.indi-item{\n    box-sizing: border-box;\n    width: 8px;\n    height: 8px;\n    border-radius: 4px;\n    background-color: #fff;\n    line-height: 8px;\n    text-align: center;\n    font-size: 12px;\n    margin: 0 5px;\n}\n\n.indi-item.active{\n    background-color: rgba(212, 62, 46, 1.0);\n}\n",{"version":3,"sources":["Swiper.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Swiper.vue","sourceRoot":"src/components/common/swiper","sourcesContent":["<template>\r\n    <div id=\"hy-swiper\">\r\n        <div class=\"swiper\" @touchstart=\"touchStart\" @touchmove=\"touchMove\" @touchend=\"touchEnd\">\r\n            <slot></slot>\r\n        </div>\r\n        <slot name=\"indicator\"></slot>\r\n        <div class=\"indicator\">\r\n            <slot name=\"indicator\" v-if=\"showIndicator && slideCount>1\">\r\n                <div v-for=\"(item,index) in slideCount\" class=\"indi-item\" :class=\"{active: index === currentIndex-1}\" :key=\"index\"></div>\r\n            </slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"Swiper\",\r\n    props:{\r\n        interval:{\r\n            type:Number,\r\n            default:3000\r\n        },\r\n        animDuration:{\r\n           typr: Number,\r\n           default: 300 \r\n        },\r\n        moveRatio: {\r\n            type: Number,\r\n            default: 0.25\r\n        },\r\n        showIndicator: {\r\n            typr: Boolean,\r\n            default: true\r\n        }\r\n    },\r\n    data: function(){\r\n        return{\r\n            slideCount: 0,\r\n            totalWidth: 0,\r\n            swiperStyle: {},\r\n            currentIndex: 1,\r\n            scrolling: false\r\n        }\r\n    },\r\n    mounted: function(){\r\n        // 操作DOM，在前后添加Slide\r\n        setTimeout(() => {\r\n            this.handleDom();\r\n            // 开启定时器\r\n            this.startTimer();\r\n        },100)\r\n    },\r\n    methods: {\r\n        // 定时器操作\r\n        startTimer: function(){\r\n            this.playTimer = window.setInterval(() => {\r\n                this.currentIndex++;\r\n                this.scrollContent(-this.currentIndex * this.totalWidth);\r\n            },this.interval)\r\n        },\r\n        stopTimer: function(){\r\n            window.clearInterval(this.playTimer)\r\n        },\r\n\r\n        // 滚动到正确的位置\r\n        scrollContent: function(currentPosition){\r\n            // 设置正在滚动\r\n            this.scrolling = true;\r\n\r\n            // 开始滚动动画\r\n            this.swiperStyle.transition = 'transform' + this.animDuration + 'ms';\r\n            this.setTransform(currentPosition);\r\n\r\n            // 判断滚动到的位置\r\n            this.checkPosition();\r\n\r\n\r\n            // 滚动完成\r\n            this.scrolling = false;\r\n        },\r\n\r\n        // 校验正确的位置\r\n        checkPosition: function(){\r\n            window.setTimeout(() => {\r\n                this.swiperStyle.transition = '0ms';\r\n                if(this.currentIndex >= this.slideCount + 1){\r\n                    this.currentIndex = 1;\r\n                    this.setTransform(-this.currentIndex * this.totalWidth);\r\n                }else if(this.currentIndex <= 0){\r\n                    this.currentIndex = this.slideCount;\r\n                    this.setTransform(-this.currentIndex * this.totalWidth);\r\n                }\r\n\r\n                // 结束移动后的回调\r\n                this.$emit('transitionEnd',this.currentIndex - 1);\r\n            },this.animDuration)\r\n        },\r\n\r\n        // 设置滚动的位置\r\n        setTransform: function(position){\r\n            this.swiperStyle.tranform = `translate3d(${position}px,0,0)`;\r\n            this.swiperStyle[`-wenkit-transform`] = `translate3d(${position}px),0,0`;\r\n            this.swiperStyle[`-ms-transform`] = `translate3d(${position}px),0,0`;\r\n        },\r\n\r\n        // 操作DOM，在DOM前后添加Slide\r\n        handleDom: function(){\r\n            // 获取要操作的元素\r\n            let swiperEl = document.querySelector('.swiper');\r\n            let slidesEls = swiperEl.getElementsByClassName('slide');\r\n\r\n            // 保存个数\r\n            this.slideCount = slidesEls.length;\r\n\r\n            // 如果大于1个，那么在前后分别添加一个slide\r\n            if(this.slideCount > 1){\r\n                let cloneFirst = slidesEls[0].cloneNode(true);\r\n                let cloneLast = slidesEls[this.slideCount - 1].cloneNode(true);\r\n                swiperEl.insertBefore(cloneLast,slidesEls[0]);\r\n                swiperEl.appendChild(cloneFirst);\r\n                this.totalWidth = swiperEl.offsetWidth;\r\n                this.swiperStyle = swiperEl.style;\r\n            }\r\n\r\n            // 让weiper元素，显示第一个(目前是显示前面添加的最后一个元素)\r\n            this.setTransform(-this.totalWidth);\r\n        },\r\n\r\n        // 拖动事件的处理\r\n        touchStart: function(e){\r\n            // 如果正在滚动，不可以拖动\r\n            if(this.scrolling) return;\r\n\r\n            // 停止定时器\r\n            this.stopTimer();\r\n\r\n            // 保存开始滚动的位置\r\n            this.startX = e.touches[0].pageX;\r\n        },\r\n\r\n        touchMove: function(e){\r\n            // 计算用户拖动的距离\r\n            this.currentX = e.touches[0].pageX;\r\n            this.distance = this.currentX - this.startX;\r\n            let currentPosition = -this.currentIndex * this.totalWidth;\r\n            let moveDistance = this.distance + currentPosition;\r\n\r\n            // 设置当前的位置\r\n            this.setTransform(moveDistance);\r\n        },\r\n\r\n        touchEnd: function(e){\r\n            let currendMove = Math.abs(this.distance);\r\n\r\n            if(this.distance === 0){\r\n                return\r\n            }else if(this.distance > 0 && currendMove > this.totalWidth * this.moveRatio){\r\n                this.currentIndex--;\r\n            }else if(this.distance < 0 && currendMove > this.totalWidth * this.moveRatio){\r\n                this.currentIndex++;\r\n            }\r\n\r\n            this.scrollContent(-this.currentIndex * this.totalWidth);\r\n\r\n            this.startTimer();\r\n        },\r\n\r\n        previous: function(){\r\n            this.changeItem(-1);\r\n        },\r\n\r\n        next: function(){\r\n            this.changeItem(1);\r\n        },\r\n\r\n        changeItem: function(num) {\r\n            this.stopTimer();\r\n\r\n            this.currentIndex += num ;\r\n            this.scrollCountent(-this.currentIndex * this.totalWidth);\r\n\r\n            this.startTimer();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    #hy-swiper{\r\n        overflow: hidden;\r\n        position: relative;\r\n    }\r\n\r\n    .swiper{\r\n        display: flex;\r\n    }\r\n\r\n    .indicator {\r\n        display: flex;\r\n        justify-content: center;\r\n        position: absolute;\r\n        width: 100%;\r\n        bottom: 8px;\r\n    }\r\n\r\n    .indi-item{\r\n        box-sizing: border-box;\r\n        width: 8px;\r\n        height: 8px;\r\n        border-radius: 4px;\r\n        background-color: #fff;\r\n        line-height: 8px;\r\n        text-align: center;\r\n        font-size: 12px;\r\n        margin: 0 5px;\r\n    }\r\n\r\n    .indi-item.active{\r\n        background-color: rgba(212, 62, 46, 1.0);\r\n    }\r\n</style>"]}]}