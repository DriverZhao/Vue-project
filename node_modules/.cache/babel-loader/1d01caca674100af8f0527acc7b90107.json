{"remainingRequest":"E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\node_modules\\babel-loader\\lib\\index.js!E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\src\\views\\category\\Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\src\\views\\category\\Category.vue","mtime":1641122040969},{"path":"E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636441690295},{"path":"E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\node_modules\\babel-loader\\lib\\index.js","mtime":1636441711808},{"path":"E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636441690295},{"path":"E:\\xiaohong-working\\html5&css3\\vue-project\\supermall\\node_modules\\vue-loader\\lib\\index.js","mtime":1636441705177}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\xiaohong-working\\\\html5&css3\\\\vue-project\\\\supermall\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport NavBar from \"../../components/common/navbar/NavBar.vue\";\nimport TabMenu from \"./childComps/TabMenu.vue\";\nimport TabContentCategory from \"./childComps/TabContentCategory.vue\";\nimport TabControl from 'components/content/tabControl/TabControl';\nimport Scroll from 'components/common/srcoll/Scroll';\nimport GoodsList from 'components/content/goods/GoodsList';\nimport { getCategory, getSubcategory, getCategoryDetail } from 'network/category';\nimport { POP, SELL, NEW } from 'common/const';\nimport { tabControlMixin } from '@/common/mixin';\nexport default {\n  name: \"Category\",\n  components: {\n    NavBar: NavBar,\n    TabMenu: TabMenu,\n    TabControl: TabControl,\n    Scroll: Scroll,\n    TabContentCategory: TabContentCategory,\n    GoodsList: GoodsList\n  },\n  mixins: [tabControlMixin],\n  data: function data() {\n    return {\n      categories: [],\n      categoryData: {},\n      currentIndex: -1\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // 请求分类数据\n    this._getCategory(); // 监听图片加载完成\n\n\n    this.$bus.$on('imgLoad', function () {\n      _this.$refs.scroll.refresh();\n    });\n  },\n  computed: {\n    showSubcategory: function showSubcategory() {\n      if (this.currentIndex === -1) return {};\n      return this.categoryData[this.currentIndex].subcategories;\n    },\n    showCategoryDetail: function showCategoryDetail() {\n      if (this.currentIndex === -1) return [];\n      return this.categoryData[this.currentIndex].categoryDetail[this.currentType];\n    }\n  },\n  methods: {\n    _getCategory: function _getCategory() {\n      var _this2 = this;\n\n      getCategory().then(function (res) {\n        // 获取分类数据\n        _this2.categories = res.data.category.list;\n        console.log(res); // 初始化每个类别的子数据\n\n        for (var i = 0; i < _this2.categories.length; i++) {\n          _this2.categoryData[i] = {\n            subcategories: {},\n            categoryDetail: {\n              'pop': [],\n              'new': [],\n              'sell': []\n            }\n          };\n        } // 请求第一个分类的数据\n\n\n        _this2._getSubcategories(0);\n      });\n    },\n    _getSubcategories: function _getSubcategories(index) {\n      var _this3 = this;\n\n      this.currentIndex = index;\n      var mailKey = this.categories[index].maitKey;\n      getSubcategory(mailKey).then(function (res) {\n        _this3.categoryData[index].subcategories = res.data;\n        _this3.categoryData = _objectSpread({}, _this3.categoryData);\n\n        _this3._getCategoryDetail(POP);\n\n        _this3._getCategoryDetail(SELL);\n\n        _this3._getCategoryDetail(NEW);\n      });\n    },\n    _getCategoryDetail: function _getCategoryDetail(type) {\n      var _this4 = this;\n\n      // 获取请求的miniWallkey\n      var miniWallkey = this.categories[this.currentIndex].miniWallkey; // 发送请求,传入mininWallkey和type\n\n      getCategoryDetail(miniWallkey, type).then(function (res) {\n        // 将获取的数据保存下来\n        _this4.categoryData[_this4.currentIndex].categoryDetail[type] = res;\n        _this4.categoryData = _objectSpread({}, _this4.categoryData);\n      });\n    },\n    // 事件相应相关的方法\n    selectItem: function selectItem(index) {\n      this._getSubcategories(index);\n    }\n  }\n};",{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAA,MAAA;AAEA,OAAA,OAAA;AACA,OAAA,kBAAA;AAEA,OAAA,UAAA,MAAA,0CAAA;AACA,OAAA,MAAA,MAAA,iCAAA;AACA,OAAA,SAAA,MAAA,oCAAA;AAEA,SAAA,WAAA,EAAA,cAAA,EAAA,iBAAA,QAAA,kBAAA;AACA,SAAA,GAAA,EAAA,IAAA,EAAA,GAAA,QAAA,cAAA;AACA,SAAA,eAAA,QAAA,gBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,UAAA,EAAA,UAHA;AAIA,IAAA,MAAA,EAAA,MAJA;AAKA,IAAA,kBAAA,EAAA,kBALA;AAMA,IAAA,SAAA,EAAA;AANA,GAFA;AAUA,EAAA,MAAA,EAAA,CAAA,eAAA,CAVA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA,CAAA;AAHA,KAAA;AAKA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AAAA;;AACA;AACA,SAAA,YAAA,GAFA,CAIA;;;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,SAAA,EAAA,YAAA;AACA,MAAA,KAAA,CAAA,KAAA,CAAA,MAAA,CAAA,OAAA;AACA,KAFA;AAGA,GA1BA;AA2BA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,UAAA,KAAA,YAAA,KAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,aAAA,KAAA,YAAA,CAAA,KAAA,YAAA,EAAA,aAAA;AACA,KAJA;AAKA,IAAA,kBALA,gCAKA;AACA,UAAA,KAAA,YAAA,KAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,aAAA,KAAA,YAAA,CAAA,KAAA,YAAA,EAAA,cAAA,CAAA,KAAA,WAAA,CAAA;AACA;AARA,GA3BA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,MAAA,WAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAHA,CAIA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,MAAA,CAAA,UAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,UAAA,MAAA,CAAA,YAAA,CAAA,CAAA,IAAA;AACA,YAAA,aAAA,EAAA,EADA;AAEA,YAAA,cAAA,EAAA;AACA,qBAAA,EADA;AAEA,qBAAA,EAFA;AAGA,sBAAA;AAHA;AAFA,WAAA;AAQA,SAdA,CAeA;;;AACA,QAAA,MAAA,CAAA,iBAAA,CAAA,CAAA;AACA,OAjBA;AAkBA,KApBA;AAqBA,IAAA,iBArBA,6BAqBA,KArBA,EAqBA;AAAA;;AACA,WAAA,YAAA,GAAA,KAAA;AACA,UAAA,OAAA,GAAA,KAAA,UAAA,CAAA,KAAA,EAAA,OAAA;AACA,MAAA,cAAA,CAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,KAAA,EAAA,aAAA,GAAA,GAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,YAAA,qBAAA,MAAA,CAAA,YAAA;;AACA,QAAA,MAAA,CAAA,kBAAA,CAAA,GAAA;;AACA,QAAA,MAAA,CAAA,kBAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,kBAAA,CAAA,GAAA;AACA,OANA;AAOA,KA/BA;AAgCA,IAAA,kBAhCA,8BAgCA,IAhCA,EAgCA;AAAA;;AACA;AACA,UAAA,WAAA,GAAA,KAAA,UAAA,CAAA,KAAA,YAAA,EAAA,WAAA,CAFA,CAGA;;AACA,MAAA,iBAAA,CAAA,WAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,MAAA,CAAA,YAAA,EAAA,cAAA,CAAA,IAAA,IAAA,GAAA;AACA,QAAA,MAAA,CAAA,YAAA,qBAAA,MAAA,CAAA,YAAA;AACA,OAJA;AAKA,KAzCA;AA0CA;AACA,IAAA,UA3CA,sBA2CA,KA3CA,EA2CA;AACA,WAAA,iBAAA,CAAA,KAAA;AACA;AA7CA;AArCA,CAAA","sourcesContent":["<template>\n  <div class=\"category\">\n    <nav-bar class=\"nav-bar\"><div slot=\"center\">商品分类</div></nav-bar>\n    <div class=\"content\">\n      <tab-menu :categories=\"categories\"\n                @selectItem=\"selectItem\">\n      </tab-menu>\n      <scroll id=\"tab-content\"\n              :data=\"[categoryData]\"\n              ref=\"scroll\">\n          <div>\n            <tab-content-category :subcategories=\"showSubcategory\"></tab-content-category>\n            <tab-control :titles=\"['综合','新品','销量']\"\n                          @itemClick=\"tabClick\">\n            </tab-control>\n            <goods-list :goods=\"showCategoryDetail\"></goods-list>\n          </div>\n      </scroll>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from '../../components/common/navbar/NavBar.vue'\n\nimport TabMenu from './childComps/TabMenu.vue'\nimport TabContentCategory from './childComps/TabContentCategory.vue'\n\nimport TabControl from 'components/content/tabControl/TabControl'\nimport Scroll from 'components/common/srcoll/Scroll'\nimport GoodsList from 'components/content/goods/GoodsList'\n\nimport {getCategory,getSubcategory,getCategoryDetail} from 'network/category'\nimport {POP,SELL,NEW } from 'common/const'\nimport {tabControlMixin} from '@/common/mixin'\n\n  export default {\n    name: \"Category\",\n    components: {\n      NavBar,\n      TabMenu,\n      TabControl,\n      Scroll,\n      TabContentCategory,\n      GoodsList\n    },\n    mixins:[tabControlMixin],\n    data(){\n      return {\n        categories: [],\n        categoryData:{},\n        currentIndex: -1\n      }\n    },\n    created(){\n      // 请求分类数据\n      this._getCategory()\n\n      // 监听图片加载完成\n      this.$bus.$on('imgLoad',() => {\n        this.$refs.scroll.refresh()\n      })\n    },\n    computed: {\n      showSubcategory(){\n        if (this.currentIndex === -1) return {}\n        return this.categoryData[this.currentIndex].subcategories\n      },\n      showCategoryDetail(){\n        if (this.currentIndex === -1) return []\n        return this.categoryData[this.currentIndex].categoryDetail[this.currentType]\n      }\n    },\n    methods: {\n      _getCategory(){\n        getCategory().then(res => {\n          // 获取分类数据\n          this.categories = res.data.category.list\n          console.log(res);\n          // 初始化每个类别的子数据\n          for (let i = 0; i < this.categories.length; i++) {\n            this.categoryData[i] = {\n              subcategories: {},\n              categoryDetail: {\n                'pop': [],\n                'new': [],\n                'sell': [],\n              }\n            }\n          }\n          // 请求第一个分类的数据\n          this._getSubcategories(0)\n        })\n      },\n      _getSubcategories(index){\n        this.currentIndex = index;\n        const mailKey = this.categories[index].maitKey;\n        getSubcategory(mailKey).then(res => {\n          this.categoryData[index].subcategories = res.data\n          this.categoryData = {...this.categoryData}\n          this._getCategoryDetail(POP)\n          this._getCategoryDetail(SELL)\n          this._getCategoryDetail(NEW)\n        })\n      },\n      _getCategoryDetail(type){\n        // 获取请求的miniWallkey\n        const miniWallkey = this.categories[this.currentIndex].miniWallkey;\n        // 发送请求,传入mininWallkey和type\n        getCategoryDetail(miniWallkey,type).then(res => {\n          // 将获取的数据保存下来\n          this.categoryData[this.currentIndex].categoryDetail[type] =res\n          this.categoryData = {...this.categoryData}\n        })\n      },\n      // 事件相应相关的方法\n      selectItem(index){\n        this._getSubcategories(index)\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #category{\n    height: 100vh;\n  }\n\n  .nav-bar{\n    background-color: var(--color-tint);\n    font-weight: 700;\n    color: #fff;\n  }\n\n  .content{\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 44px;\n    bottom: 49px;\n    display: flex;\n  }\n\n  #tab-content{\n    height: 100%;\n    flex: 1;\n  }\n</style>\n"],"sourceRoot":"src/views/category"}]}