{"remainingRequest":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\babel-loader\\lib\\index.js!E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\src\\views\\detail\\Detail.vue","mtime":1640084773425},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636441690295},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\babel-loader\\lib\\index.js","mtime":1636441711808},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636441690295},{"path":"E:\\小泓工作室\\html5&css3\\vue-project\\supermall\\node_modules\\vue-loader\\lib\\index.js","mtime":1636441705177}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _objectSpread from \"E:\\\\\\u5C0F\\u6CD3\\u5DE5\\u4F5C\\u5BA4\\\\html5&css3\\\\vue-project\\\\supermall\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DetailNavBar from \"./childComps/DetailNavBar.vue\";\nimport DetailSwiper from \"./childComps/DetailSwiper.vue\";\nimport DetailBaseInfo from \"./childComps/DetailBaseInfo.vue\";\nimport DetailShopInfo from \"./childComps/DetailShopInfo.vue\";\nimport DetailGoodsInfo from \"./childComps/DetailGoodsInfo.vue\";\nimport DetailParamInfo from \"./childComps/DetailParamInfo.vue\";\nimport DetailCommentInfo from \"./childComps/DetailCommentInfo.vue\";\nimport DetailBottomBar from \"./childComps/DetaBottomBar.vue\";\nimport CartButton from \"./childComps/CartButton.vue\";\nimport Scroll from 'components/common/srcoll/Scroll';\nimport { getDetail, getRecommend, Goods, Shop, GoodsParam } from 'network/detail';\nimport { backTopMixin } from 'common/mixin';\nimport { mapActions } from 'vuex';\nimport Toast from 'components/common/toast/Toats';\nimport GoodsList from 'components/content/goods/GoodsList.vue';\nexport default {\n  name: \"Detail\",\n  components: {\n    DetailNavBar: DetailNavBar,\n    DetailSwiper: DetailSwiper,\n    DetailBaseInfo: DetailBaseInfo,\n    DetailShopInfo: DetailShopInfo,\n    DetailGoodsInfo: DetailGoodsInfo,\n    DetailParamInfo: DetailParamInfo,\n    DetailCommentInfo: DetailCommentInfo,\n    CartButton: CartButton,\n    GoodsList: GoodsList,\n    DetailBottomBar: DetailBottomBar,\n    Scroll: Scroll,\n    Toast: Toast\n  },\n  mixins: [backTopMixin],\n  data: function data() {\n    return {\n      iid: '',\n      topImage: [],\n      goods: {},\n      shop: {},\n      detailInfo: {},\n      paramInfo: {},\n      commentInfo: {},\n      goodsList: [],\n      themeTops: [],\n      currentIndex: 0\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // 去除iid\n    this.iid = this.$router.params.iid;\n    getDetail(this.iid).then(function (res) {\n      console.log(res);\n      var data = res.result;\n      _this.topImage = data.itemInfo.topImages;\n      _this.goods = new Goods(data.itemInfo, data.columns, data.shopInfo.services);\n      _this.shop = new Shop(data.shopInfo);\n      _this.detailInfo = data.detailInfo;\n      _this.paramInfo = new GodosParam(data.itemParams.info, data.itemParams.rule);\n    });\n  },\n  methods: _objectSpread({}, mapActions({\n    addCart: 'addToCart'\n  }), {\n    imageLoad: function imageLoad() {\n      this.$refs.scroll.refresh(); // 获取对应的offsetTop\n\n      this.themeTops = [];\n      this.themeTops.push(0);\n      this.themeTops.push(this.$refs.param.$el.offsetTop);\n      this.themeTops.push(this.$refs.comment.$el.offsetTop);\n      this.themeTops.push(this.$refs.recommend.$el.offsetTop);\n      this.themeTops.push(Number.MAX_VALUE);\n    },\n    selectIndex: function selectIndex(index) {\n      this.$refs.scroll.scrollTo(0, -this.themeTops[index], 500);\n    },\n    contentScroll: function contentScroll(position) {\n      // 决定backTop按钮是否显示\n      this.showBackTop = position.y <= -1000; // 监听滚动到某个主题\n\n      this._listenScrollTheme(-position.y);\n    },\n    _listenScrollTheme: function _listenScrollTheme(position) {\n      var length = this.themeTops.length;\n\n      for (var i = 0; i < length; i++) {\n        var iPos = this.themeTops[i];\n\n        if (position >= iPos && position < this.themeTops[i + 1]) {\n          if (this.currentIndex !== i) {\n            this.currentIndex = i;\n          }\n\n          break;\n        }\n      }\n    },\n    cartClick: function cartClick() {\n      this.$router.push('/cart');\n    },\n    addTopCart: function addTopCart() {\n      var _this2 = this;\n\n      // 将商品添加到Store中\n      var obj = {};\n      obj.iid = this.iid;\n      obj.imgURL = this.topImages[0];\n      obj.title = this.goods.title;\n      obj.desc = this.goods.desc;\n      obj.price = this.goods.realPrice;\n      this.addCart(obj).then(function () {\n        _this2.$toast({\n          message: '加入购物车成功！'\n        });\n      });\n    },\n    _getDetail: function _getDetail(iid) {\n      var _this3 = this;\n\n      getDetail(iid).then(function (res) {\n        // 获取数据\n        var data = res.result;\n        console.log(data); // 获取顶部的图片数据\n\n        _this3.topImages = data.itemInfo.topImages; // 获取商品信息\n\n        _this3.goods = new Goods(data.itemInfo, data.columns, data.shopInfo.services); // 获取店铺信息\n\n        _this3.shop = new Shop(data.shopInfo); // 获取商品详细信息\n\n        _this3.detailInfo = data.detailInfo; // 保存参数信息\n\n        _this3.paramInfo = new GodosParam(data.itemParams.info, data.itemParams.rule); // 保存评论数据\n\n        if (data.rate.list) {\n          _this3.commentInfo = data.rate.list[0];\n        }\n      });\n    },\n    _getRecommend: function _getRecommend() {\n      var _this4 = this;\n\n      getRecommend().then(function (res) {\n        _this4.goodsList = res.data.list;\n      });\n    }\n  })\n};",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id=\"detail\">\r\n        <detail-nav-bar @titleClick=\"selectIndex\" :current-index=\"currentIndex\"></detail-nav-bar>\r\n        <scroll class=\"content\" \r\n                ref=\"scroll\"\r\n                @scroll=\"contentScroll\"\r\n                :prode-type=\"3\"\r\n                :data=\"[topImages,goods,shop,detailInfo,paramInfo,goodsList]\">\r\n            <detail-swiper :top-images=\"topImages\"/>\r\n            <detail-base-info :goods=\"goods\"></detail-base-info>\r\n            <detail-shop-info :shop=\"shop\"></detail-shop-info>\r\n            <detail-goods-info :deatil-info=\"detailInfo\" @imageLoad=\"imageLoad\"></detail-goods-info>\r\n            <detail-param-info ref=\"param\" :param-info=\"paramInfo\"></detail-param-info>\r\n            <detail-comment-info ref=\"comment\" :comment-info=\"commentInfo\"></detail-comment-info>\r\n            <goods-list ref=\"recommend\" :goods=\"goodsList\"/>\r\n        </scroll>\r\n        <back-top v-show=\"showBackTop\" @click.native=\"backTop\"/>\r\n        <detail-bottom-bar @addToCart=\"addToCart\"/>\r\n        <toast ref=\"toast\"/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport DetailNavBar from './childComps/DetailNavBar.vue'\r\nimport DetailSwiper from './childComps/DetailSwiper.vue'\r\nimport DetailBaseInfo from './childComps/DetailBaseInfo.vue'\r\nimport DetailShopInfo from './childComps/DetailShopInfo.vue'\r\nimport DetailGoodsInfo from './childComps/DetailGoodsInfo.vue'\r\nimport DetailParamInfo from './childComps/DetailParamInfo.vue'\r\nimport DetailCommentInfo from './childComps/DetailCommentInfo.vue'\r\nimport DetailBottomBar from './childComps/DetaBottomBar.vue'\r\nimport CartButton from './childComps/CartButton.vue'\r\n\r\nimport Scroll from 'components/common/srcoll/Scroll'\r\n\r\nimport {getDetail,getRecommend,Goods,Shop,GoodsParam} from 'network/detail'\r\nimport {backTopMixin} from 'common/mixin'\r\nimport {mapActions} from 'vuex'\r\n\r\nimport Toast from 'components/common/toast/Toats'\r\nimport GoodsList from 'components/content/goods/GoodsList.vue'\r\n\r\nexport default {\r\n    name: \"Detail\",\r\n    components: {\r\n        DetailNavBar,\r\n        DetailSwiper,\r\n        DetailBaseInfo,\r\n        DetailShopInfo,\r\n        DetailGoodsInfo,\r\n        DetailParamInfo,\r\n        DetailCommentInfo,\r\n        CartButton,\r\n        GoodsList,\r\n        DetailBottomBar,\r\n        Scroll,\r\n        Toast,\r\n    },\r\n    mixins: [backTopMixin],\r\n    data(){\r\n        return {\r\n            iid: '',\r\n            topImage: [],\r\n            goods: {},\r\n            shop: {},\r\n            detailInfo: {},\r\n            paramInfo: {},\r\n            commentInfo: {},\r\n            goodsList: [],\r\n            themeTops: [],\r\n            currentIndex: 0\r\n        }\r\n    },\r\n    created(){\r\n        // 去除iid\r\n        this.iid = this.$router.params.iid\r\n\r\n        getDetail(this.iid).then(res => {\r\n            console.log(res);\r\n            const data = res.result;\r\n            this.topImage = data.itemInfo.topImages;\r\n\r\n            this.goods = new Goods(data.itemInfo,data.columns,data.shopInfo.services);\r\n\r\n            this.shop = new Shop(data.shopInfo);\r\n\r\n            this.detailInfo = data.detailInfo;\r\n\r\n            this.paramInfo = new GodosParam(data.itemParams.info , data.itemParams.rule);\r\n        })\r\n    },\r\n    methods: {\r\n        ...mapActions({\r\n            addCart: 'addToCart'\r\n        }),\r\n        imageLoad(){\r\n            this.$refs.scroll.refresh();\r\n            // 获取对应的offsetTop\r\n            this.themeTops = [];\r\n            this.themeTops.push(0);\r\n            this.themeTops.push(this.$refs.param.$el.offsetTop);\r\n            this.themeTops.push(this.$refs.comment.$el.offsetTop);\r\n            this.themeTops.push(this.$refs.recommend.$el.offsetTop);\r\n            this.themeTops.push(Number.MAX_VALUE);\r\n        },\r\n        selectIndex(index){\r\n            this.$refs.scroll.scrollTo(0,-this.themeTops[index],500);\r\n        },\r\n        contentScroll(position){\r\n            // 决定backTop按钮是否显示\r\n            this.showBackTop = position.y <= -1000;\r\n            // 监听滚动到某个主题\r\n            this._listenScrollTheme(-position.y);\r\n        },\r\n        _listenScrollTheme(position){\r\n            let length = this.themeTops.length\r\n            for (let i = 0; i < length; i++) {\r\n                let iPos = this.themeTops[i];\r\n\r\n                if (position >= iPos && position < this.themeTops[i+1]) {\r\n                    if (this.currentIndex !== i) {\r\n                        this.currentIndex = i;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        cartClick(){\r\n            this.$router.push('/cart');\r\n        },\r\n        addTopCart(){\r\n            // 将商品添加到Store中\r\n            const obj = {};\r\n            obj.iid = this.iid;\r\n            obj.imgURL = this.topImages[0];\r\n            obj.title = this.goods.title;\r\n            obj.desc = this.goods.desc;\r\n            obj.price = this.goods.realPrice;\r\n\r\n            this.addCart(obj).then(() => {\r\n                this.$toast({message: '加入购物车成功！'});\r\n            })\r\n        },\r\n        _getDetail(iid){\r\n            getDetail(iid).then(res => {\r\n                // 获取数据\r\n                const data = res.result;\r\n                console.log(data);\r\n\r\n                // 获取顶部的图片数据\r\n                this.topImages = data.itemInfo.topImages;\r\n\r\n                // 获取商品信息\r\n                this.goods = new Goods(data.itemInfo,data.columns,data.shopInfo.services);\r\n\r\n                // 获取店铺信息\r\n                this.shop = new Shop(data.shopInfo);\r\n\r\n                // 获取商品详细信息\r\n                this.detailInfo = data.detailInfo\r\n\r\n                // 保存参数信息\r\n                this.paramInfo = new GodosParam(data.itemParams.info,data.itemParams.rule);\r\n\r\n                // 保存评论数据\r\n                if (data.rate.list) {\r\n                    this.commentInfo = data.rate.list[0];\r\n                }\r\n            })\r\n        },\r\n        _getRecommend(){\r\n            getRecommend().then(res => {\r\n                this.goodsList = res.data.list\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    #detail{\r\n        position: relative;\r\n        z-index: 9;\r\n        background-color: #fff;\r\n    }\r\n    .content{\r\n        height: calc(100% - 44px);\r\n    }\r\n</style>"],"sourceRoot":"src/views/detail"}]}